<?xml version="1.0" encoding="utf-8"?>
<root xmlns:android="http://schemas.android.com/apk/res/android">
	<init>
		<log text="Clever Ads Solutions (CAS) Initialization"/>

		<setStringFromProperty result="AppID" ini="Engine" section="/Script/CleverAdsSolutions.CASSettings" property="AndroidAppID"/>
		<setBoolFromProperty result="TestMode" ini="Engine" section="/Script/CleverAdsSolutions.CASSettings" property="TestMode" default="true"/>
	</init>

	<androidManifestUpdates>
		<addElements tag="application">
			<meta-data android:name="cas.sdk.appid" android:value="$S(AppID)"/>
		</addElements>
		
		<if condition="TestMode">
			<true>
				<addElements tag="application">
					<meta-data android:name="cas.sdk.testmode" android:value="true"/>
				</addElements>
			</true>
		</if>
	</androidManifestUpdates>
	
	<buildGradleAdditions>
		<insert>
			android {
				compileOptions {
					sourceCompatibility 1.8
					targetCompatibility 1.8
				}
			}
			
			repositories {
				google()
				mavenCentral()

				maven { url = "https://android-sdk.is.com/" } // IronSource

				maven { url = "https://aa-sdk.s3-eu-west-1.amazonaws.com/android_repo" } // SuperAwesome

				maven { url = "https://dl-maven-android.mintegral.com/repository/mbridge_android_sdk_oversea" } // Mintegral

				maven { url = "https://artifact.bytedance.com/repository/pangle" } // Pangle

				maven { url = "https://sdk.tapjoy.com/" } // TapJoy
			  }

			dependencies {
				implementation 'com.cleveradssolutions:cas:2.9.8'
			
				implementation 'com.google.android.material:material:1.0.0'
				implementation "androidx.constraintlayout:constraintlayout:1.1.3"
			}
		</insert>
	</buildGradleAdditions>

	<proguardAdditions>
		<insert>
		</insert>
	</proguardAdditions>

	<prebuildCopies>
		<!-- Copy custom java interfaces to call from JNI -->
		<copyDir src="$S(PluginDir)/External/Android/" dst="$S(BuildDir)/src"/>

		<!-- Copy custom ad layouts -->
		<copyDir src="$S(PluginDir)/Layout/Android/" dst="$S(BuildDir)/res/layout"/> 
	</prebuildCopies>

	<gameActivityImportAdditions>
		<insert>
			<![CDATA[
				import com.unreal.cas.CASUnrealManager;
			]]>
		</insert>
	</gameActivityImportAdditions>

	<gameActivityOnCreateAdditions>
		<insert>
			<![CDATA[
				CASUnrealManager.Init(this);
			]]>
		</insert>
	</gameActivityOnCreateAdditions>

</root>
